{% extends "layout.html" %}
{% block content %}

<!-- magnifier css -->
<link rel="stylesheet" type="text/css" href="{{url_for ('static', filename= 'magnifier.css')}}">

<!-- magnifier js -->
<script type="text/javascript" src="{{url_for ('static', filename= 'Event.js')}}"></script>
<script type="text/javascript" src="{{url_for ('static', filename= 'Magnifier.js')}}"></script>
<script type="text/javascript">
var evt = new Event();
var m = new Magnifier(evt);
{% if zoom %}
var zoom = {{zoom}};
{% endif %}
window.onload = function() {
  var evt = new Event();
  var m = new Magnifier(evt);
  m.attach({
      thumb: '#thumb-inside',
      large: "{{zoom_path}}",
      mode: 'inside',
      zoom: zoom,
      zoomable: true
  });
  document.getElementById("scale").innerHTML += Math.round(100/zoom) + " mÂ²."
};
</script>

<article class="media content-section">
    <div class="list-group">
      <div style="width:210px;""></div>
      <div style="position: fixed;">
        <img class = "rounded-circle article-img" src="{{url_for ('static', filename= 'profile_pics/' + post.author.image_file)}}">
        <br/>
        <br/>
        <div> Zoom </div>
        <a href="/viz/{{post.id}}/img/{{img}}/zoom/{{zoom+1}}/img/{{zoom_id}}" style="width:50px;height:50px;" class="m-0 list-group-item list-group-item-action">+</a>
        <a href="/viz/{{post.id}}/img/{{img}}/zoom/{{zoom-1}}/img/{{zoom_id}}" style="width:50px;height:50px;" class="m-0 list-group-item list-group-item-action">-</a>
        <br/>
        <br/>
        <div class="container">
          <div class="row">
            <div style="col-sm">
              <div> Main image </div>
              <a href="/viz/{{post.id}}/img/{{img+8}}/zoom/{{zoom}}/img/{{zoom_id}}" style="width:100px;height:50px;" class="{{infra_style}} m-0 list-group-item list-group-item-action">Infrared</a>
              <a href="/viz/{{post.id}}/img/{{img+mask}}/zoom/{{zoom}}/img/{{zoom_id}}" style="width:100px;height:50px;" class="{{mask_style}} m-0 list-group-item list-group-item-action">Predicted</a>
              <a href="/viz/{{post.id}}/img/{{img+msi}}/zoom/{{zoom}}/img/{{zoom_id}}" style="width:100px;height:70px;" class="{{msi_style}} m-0 list-group-item list-group-item-action">Water stress</a>
              <a href="/viz/{{post.id}}/img/{{img+rgb}}/zoom/{{zoom}}/img/{{zoom_id}}" style="width:100px;height:50px;" class="{{rgb_style}} m-0 list-group-item list-group-item-action">RGB</a>
            </div>
            <div style="col-sm">
              <div> Zoom image </div>
              <a href="/viz/{{post.id}}/img/{{img}}/zoom/{{zoom}}/img/{{zoom_id+8}}" style="width:100px;height:50px;" class="{{zoom_infra_style}} m-0 list-group-item list-group-item-action">Infrared</a>
              <a href="/viz/{{post.id}}/img/{{img}}/zoom/{{zoom}}/img/{{zoom_id+zoom_mask}}" style="width:100px;height:50px;" class="{{zoom_mask_style}} m-0 list-group-item list-group-item-action">Predicted</a>
              <a href="/viz/{{post.id}}/img/{{img}}/zoom/{{zoom}}/img/{{zoom_id+zoom_msi}}" style="width:100px;height:70px;" class="{{zoom_msi_style}} m-0 list-group-item list-group-item-action">Water stress</a>
              <a href="/viz/{{post.id}}/img/{{img}}/zoom/{{zoom}}/img/{{zoom_id+zoom_rgb}}" style="width:100px;height:50px;" class="{{zoom_rgb_style}} m-0 list-group-item list-group-item-action">RGB</a>
            </div>
          </div>
        </div>
        <br/>
        <br/>
        <div class="m-0">
          {% for kpi in kpis %}
          <div> {{kpi}} </div>
          {% endfor %}
        </div>
      </div>
    </div>
    <div class="media-body" style="left:110px">
        <div class="article-metadata">
        <a class="mr-2" href="#">{{ post.author.username }}</a>
        <small class="text-muted">{{ post.date_posted.strftime('%Y-%m-%d') }}</small>
        </div>
        <h2 class= "article-title">{{ post.title }}</h2>
        <div>
          {% if msi_style !="" or zoom_msi_style != "" %}
            <div> Hydric stress: Lighter pixels indicate higher water stress in forests.  </div>
          {% endif %}
          {% if infra_style !="" or zoom_infra_style != "" %}
            <div> Infrared: Red hues show broadleaf or/and healthier vegetation. </div>
          {% endif %}
          {% if rgb_style !="" or zoom_rgb_style != "" %}
            <div> RGB: visualization alone does not allow detection of degradation patterns in tropical forests.  </div>
          {% endif %}
        </div>
        <div>
          <div class="magnifier-thumb-wrapper">
              <img class="img-fluid" alt="Responsive image" id="thumb-inside" src="{{img_path}}" data-mode="inside" data-zoomable="true">
        </div>
    </div>
    <p id="scale" class="font-italic article-content"> In the zoom window, a pixel corresponds to </p>
    <a class="btn btn-primary" href="/post/{{post.id}}"> Back </a>
</article>

{% endblock content %}
